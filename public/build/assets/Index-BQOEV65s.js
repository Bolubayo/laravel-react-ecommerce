import{r as i,m as h,j as e,$ as o,S as j,L as p}from"./app-B8WagT0Y.js";import{T as f}from"./TextInput-7qInl7oe.js";import{p as c,C as m,A as b}from"./AuthenticatedLayout-DYFTrcju.js";import{P as v}from"./PrimaryButton-D3ox99pz.js";function g({title:s,titleId:t,...r},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?i.createElement("title",{id:t},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"}))}const x=i.forwardRef(g);function y({item:s}){const t=h({option_ids:s.option_ids}),[r,a]=i.useState(""),n=()=>{t.delete(route("cart.destroy",s.product_id),{preserveScroll:!0})},d=l=>{a(""),j.put(route("cart.update",s.product_id),{quantity:l.target.value,option_ids:s.option_ids},{preserveScroll:!0,onError:u=>{a(Object.values(u)[0])}})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex gap-6 p-3",children:[e.jsx(o,{href:c(s),className:"w-32 min-w-32 min-h-32 flex justify-center self-start",children:e.jsx("img",{src:s.image,alt:"",className:"max-w-full max-h-full"})}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"mb-3 text-sm font-semibold",children:e.jsx(o,{href:c(s),children:s.title})}),e.jsx("div",{className:"text-xs",children:s.options.map(l=>e.jsxs("div",{children:[e.jsxs("strong",{className:"text-bold",children:[l.type.name,":"]}),l.name]},l.id))})]}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("div",{className:"text-sm",children:"Quantity:"}),e.jsx("div",{className:r?"tooltip tooltip-open tooltip-error":"","data-tip":r,children:e.jsx(f,{type:"number",defaultValue:s.quantity,onBlur:d,className:"input-sm w-16"})}),e.jsx("button",{onClick:()=>n(),className:"btn btn-sm btn-ghost",children:"Delete"}),e.jsx("button",{className:"btn btn-sm btn-ghost",children:"Save for Later"})]}),e.jsx("div",{className:"font-bold text-lg",children:e.jsx(m,{amount:s.price*s.quantity})})]})]})]},s.id),e.jsx("div",{className:"divider"})]})}function S({csrf_token:s,cartItems:t,totalQuantity:r,totalPrice:a}){return e.jsxs(b,{children:[e.jsx(p,{title:"Your Cart"}),e.jsxs("div",{className:"container mx-auto p-8 flex flex-col lg:flex-row gap-4",children:[e.jsx("div",{className:"card flex-1 bg-white dark:bg-gray-800 order-2 lg:order-1",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Shopping Cart"}),e.jsxs("div",{className:"my-4",children:[Object.keys(t).length===0&&e.jsx("div",{className:"py-2 text-gray-500 text-center",children:"You don't have any items yet."}),Object.values(t).map(n=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between pb-4 border-b border-gray-300 mb-4",children:[e.jsx(o,{href:"/",className:"underline",children:n.user.name}),e.jsx("div",{children:e.jsxs("form",{action:route("cart.checkout"),method:"post",children:[e.jsx("input",{type:"hidden",name:"_token",value:s}),e.jsx("input",{type:"hidden",name:"vendor_id",value:n.user.id}),e.jsxs("button",{className:"btn btn-sm btn-ghost",children:[e.jsx(x,{className:"size-6"}),"Pay only for this seller"]})]})})]}),n.items.map(d=>e.jsx(y,{item:d},d.id))]},n.user.id))]})]})}),e.jsx("div",{className:"card bg-white dark:bg-gray-800 lg:min-w-[260px] order-1 lg:order-2",children:e.jsxs("div",{className:"card-body",children:["Subtotal (",r," items): Â ",e.jsx(m,{amount:a}),e.jsxs("form",{action:route("cart.checkout"),method:"post",children:[e.jsx("input",{type:"hidden",name:"_token",value:s}),e.jsxs(v,{className:" rounded-full",children:[e.jsx(x,{className:"size-6"}),"Proceed to checkout"]})]})]})})]})]})}export{S as default};
